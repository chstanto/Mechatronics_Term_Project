\hypertarget{Lab__03__Back_8py}{}\doxysection{Lab\+\_\+03\+\_\+\+Back.\+py File Reference}
\label{Lab__03__Back_8py}\index{Lab\_03\_Back.py@{Lab\_03\_Back.py}}


Backend of lab 3 to be run on Nucleo and collect data.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{Lab__03__Back_8py_a0d456aac81d4db6b73e835fd6a72df61}{Lab\+\_\+03\+\_\+\+Back.\+User\+Interrupt}} (pin)
\begin{DoxyCompactList}\small\item\em This is the callback function for the user button press. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{Lab__03__Back_8py_a6a50d9572171956316561306680845a0}\label{Lab__03__Back_8py_a6a50d9572171956316561306680845a0}} 
\mbox{\hyperlink{Lab__03__Back_8py_a6a50d9572171956316561306680845a0}{Lab\+\_\+03\+\_\+\+Back.\+myuart}} = U\+A\+RT(2)
\begin{DoxyCompactList}\small\item\em Defines serial input port. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_a89d99ef9410666801d1de0cce0b14643}\label{Lab__03__Back_8py_a89d99ef9410666801d1de0cce0b14643}} 
\mbox{\hyperlink{Lab__03__Back_8py_a89d99ef9410666801d1de0cce0b14643}{Lab\+\_\+03\+\_\+\+Back.\+A\+D\+C\+Pin}} = pyb.\+Pin(pyb.\+Pin.\+board.\+P\+A0)
\begin{DoxyCompactList}\small\item\em Defines the pin for the user input button. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_ad7946d15fb2e2bf081f298e5e38aa88d}\label{Lab__03__Back_8py_ad7946d15fb2e2bf081f298e5e38aa88d}} 
\mbox{\hyperlink{Lab__03__Back_8py_ad7946d15fb2e2bf081f298e5e38aa88d}{Lab\+\_\+03\+\_\+\+Back.\+timer}} = pyb.\+Timer(2 , prescaler = 79 , period = int(100))
\begin{DoxyCompactList}\small\item\em Defines the timer to be used. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_a70d2bdac60fe039c5ca712b4c1b32434}\label{Lab__03__Back_8py_a70d2bdac60fe039c5ca712b4c1b32434}} 
\mbox{\hyperlink{Lab__03__Back_8py_a70d2bdac60fe039c5ca712b4c1b32434}{Lab\+\_\+03\+\_\+\+Back.\+buffer}} = array.\+array(\textquotesingle{}H\textquotesingle{} , (0 for index in range (101)))
\begin{DoxyCompactList}\small\item\em Defines memory buffer to be used in data collection. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_a2f0a017d1011f76b7de890f3022fd335}\label{Lab__03__Back_8py_a2f0a017d1011f76b7de890f3022fd335}} 
\mbox{\hyperlink{Lab__03__Back_8py_a2f0a017d1011f76b7de890f3022fd335}{Lab\+\_\+03\+\_\+\+Back.\+adc}} = pyb.\+A\+DC(A\+D\+C\+Pin)
\begin{DoxyCompactList}\small\item\em Variable defines the analog to digital converter pin. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_ac2eacf4589cc6cfdc97ce9320a584f86}\label{Lab__03__Back_8py_ac2eacf4589cc6cfdc97ce9320a584f86}} 
int \mbox{\hyperlink{Lab__03__Back_8py_ac2eacf4589cc6cfdc97ce9320a584f86}{Lab\+\_\+03\+\_\+\+Back.\+state}} = 0
\begin{DoxyCompactList}\small\item\em Variable representing the current state of the program. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_a5245fdacc67485be99e23bca5b6bb140}\label{Lab__03__Back_8py_a5245fdacc67485be99e23bca5b6bb140}} 
\mbox{\hyperlink{Lab__03__Back_8py_a5245fdacc67485be99e23bca5b6bb140}{Lab\+\_\+03\+\_\+\+Back.\+pin\+A5}} = pyb.\+Pin(pyb.\+Pin.\+cpu.\+A5 , pyb.\+Pin.\+O\+U\+T\+\_\+\+PP)
\begin{DoxyCompactList}\small\item\em Setting up Nucleo L\+ED. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_a770cd971d8650d843f6947bd0e74e02f}\label{Lab__03__Back_8py_a770cd971d8650d843f6947bd0e74e02f}} 
\mbox{\hyperlink{Lab__03__Back_8py_a770cd971d8650d843f6947bd0e74e02f}{Lab\+\_\+03\+\_\+\+Back.\+Interrupt\+\_\+\+Button}} = pyb.\+Ext\+Int(pyb.\+Pin.\+board.\+P\+C13, pyb.\+Ext\+Int.\+I\+R\+Q\+\_\+\+R\+I\+S\+I\+NG, pyb.\+Pin.\+P\+U\+L\+L\+\_\+\+UP, User\+Interrupt)
\begin{DoxyCompactList}\small\item\em Defining nucleo user input button as external interrupt. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Lab__03__Back_8py_aeee5b92c4df2e429ebc965e88b2a0d69}\label{Lab__03__Back_8py_aeee5b92c4df2e429ebc965e88b2a0d69}} 
float \mbox{\hyperlink{Lab__03__Back_8py_aeee5b92c4df2e429ebc965e88b2a0d69}{Lab\+\_\+03\+\_\+\+Back.\+voltage}} = int(buffer\mbox{[}n\mbox{]})$\ast$3.\+3/4095
\begin{DoxyCompactList}\small\item\em Variable representing adc data converted to voltage. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Backend of lab 3 to be run on Nucleo and collect data. 

This file will run on the Nucleo and collect voltage data to be sent via serial to spyder. This program will initially wait for input from spyder, after which it will again wait for user input through the blue button. The button press causes an interrupt which starts the data collection of the button pin voltage. This data is then converted to voltage and sent back to spyder. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Lab__03__Back_8py_a0d456aac81d4db6b73e835fd6a72df61}\label{Lab__03__Back_8py_a0d456aac81d4db6b73e835fd6a72df61}} 
\index{Lab\_03\_Back.py@{Lab\_03\_Back.py}!UserInterrupt@{UserInterrupt}}
\index{UserInterrupt@{UserInterrupt}!Lab\_03\_Back.py@{Lab\_03\_Back.py}}
\doxysubsubsection{\texorpdfstring{UserInterrupt()}{UserInterrupt()}}
{\footnotesize\ttfamily def Lab\+\_\+03\+\_\+\+Back.\+User\+Interrupt (\begin{DoxyParamCaption}\item[{}]{pin }\end{DoxyParamCaption})}



This is the callback function for the user button press. 

This function is called when the blue user button is pressed. The only thing this callback does is adjust the state to the data collection state in order to capture the pin voltage. 
\begin{DoxyParams}{Parameters}
{\em pin} & This fulfills the parameter requirement of the callback fcn. \\
\hline
\end{DoxyParams}
